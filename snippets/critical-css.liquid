{% if template contains 'product' %}
<style id="critical-css">
{% render 'product-critical-css' %}
</style>
{% elsif template contains 'index' %}
<style id="critical-css">
{% render 'homepage-critical-css' %}
</style> 
{% endif %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('link[is="delay-stylesheet"]').forEach(link => {
        link.rel = 'stylesheet';
    });
    const criticalCssElement = document.getElementById('critical-css');
    if (criticalCssElement) {
        criticalCssElement.remove();
    }
});
</script>